<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>TreeGrid 树形表格</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" /><link href="demo.css" rel="stylesheet" type="text/css" />
    <script src="boot.js" type="text/javascript"></script>
    <script type="text/javascript">
		function aa(){
			mini.parse();
			 var data = createTreeData();
			var tree = mini.get("treegrid1");
			tree.setData(data);
		}
		 //造10000个节点：4个层级，每层级10节点
    function createTreeData() {
        var index = 0;
        function create(pid, level) {
            var data = [];        
            for (var i = 0, l = 5; i < l; i++) {
                var o = {};
                index++;

                var o = {
                    "UID": index,
                    "ParentTaskUID": pid,
                    "Name": "Node" + (index),
                    "Duration": 5,
                    "Start": "2007-01-01",
                    "Finish": "2007-01-05",
                    "PercentComplete": 0,
                    "Summary": 1,
                    "Critical": 0,
                    "Milestone": 0,
                    "PredecessorLink": []
                };

                if (level > 0) {
                    o.children = create(o.UID, level - 1);
                }

                data.push(o);
            }
            return data;
        }
        var data = create("", 3);
        return data;
    }
    
   
	</script>
</head>
<body>
    <h1>TreeGrid 树形表格</h1>
    <input type="button" onclick="aa()" text="aaaaa">
<div id="treegrid1" class="mini-treegrid" style="width:700px;height:280px;"     
    url="tasks.txt" showTreeIcon="true" 
    treeColumn="taskname" idField="UID" parentField="ParentTaskUID" resultAsTree="false"  
    allowResize="true" expandOnLoad="true"
>
    <div property="columns">
        <div type="indexcolumn"></div>
        <div name="taskname" field="Name" width="160" >任务名称</div>
        <div field="PercentComplete" width="80">进度</div>
        <div field="Duration" width="60" align="right">工期</div>
        <div field="Start" width="80" dateFormat="yyyy-MM-dd">开始日期</div>
        <div field="Finish" width="80" dateFormat="yyyy-MM-dd">完成日期</div>                   
    </div>
</div>


</body>
</html>
